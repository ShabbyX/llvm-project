import("//build_overrides/llvm.gni")

import("//${llvm_build_root}/secondary/clang-tools-extra/clangd/xpc/enable.gni")

executable("clangd") {
  configs += [ "//${llvm_build_root}/build:clang_code" ]
  deps = [
    "//${llvm_build_root}/secondary/clang-tools-extra/clang-tidy",
    "//${llvm_build_root}/secondary/clang-tools-extra/clangd",
    "//${llvm_build_root}/secondary/clang-tools-extra/clangd:features",
    "//${llvm_build_root}/secondary/clang-tools-extra/clangd/index/remote/unimplemented",
    "//${llvm_build_root}/secondary/clang-tools-extra/clangd/refactor/tweaks",
    "//${llvm_build_root}/secondary/clang/lib/AST",
    "//${llvm_build_root}/secondary/clang/lib/Basic",
    "//${llvm_build_root}/secondary/clang/lib/Format",
    "//${llvm_build_root}/secondary/clang/lib/Frontend",
    "//${llvm_build_root}/secondary/clang/lib/Headers",
    "//${llvm_build_root}/secondary/clang/lib/Sema",
    "//${llvm_build_root}/secondary/clang/lib/Tooling",
    "//${llvm_build_root}/secondary/clang/lib/Tooling/Core",
    "//${llvm_build_root}/secondary/llvm/lib/Support",
  ]
  if (clangd_build_xpc) {
    deps += [
      "//${llvm_build_root}/secondary/clang-tools-extra/clangd/xpc:conversions",
      "//${llvm_build_root}/secondary/clang-tools-extra/clangd/xpc:transport",
    ]
  }

  include_dirs = [
    "..",

    # For "clang-include-cleaner/..." includes.
    "//${llvm_build_root}/secondary/clang-tools-extra/include-cleaner/include",
  ]
  sources = [
    "Check.cpp",
    "ClangdMain.cpp",
    "ClangdToolMain.cpp",
  ]
}
