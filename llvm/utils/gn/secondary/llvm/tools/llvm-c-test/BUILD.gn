import("//build_overrides/llvm.gni")

executable("llvm-c-test") {
  deps = [
    "//${llvm_build_root}/secondary/llvm/lib/Bitcode/Reader",
    "//${llvm_build_root}/secondary/llvm/lib/IR",
    "//${llvm_build_root}/secondary/llvm/lib/MC/MCDisassembler",
    "//${llvm_build_root}/secondary/llvm/lib/Object",
    "//${llvm_build_root}/secondary/llvm/lib/Support",
    "//${llvm_build_root}/secondary/llvm/lib/Target",
    "//${llvm_build_root}/secondary/llvm/lib/Target:TargetsToBuild",
  ]
  if (host_os != "win") {
    cflags_c = [
      "-std=gnu99",
      "-Wstrict-prototypes",
    ]
  }
  sources = [
    "attributes.c",
    "calc.c",
    "debuginfo.c",
    "diagnostic.c",
    "disassemble.c",
    "echo.cpp",
    "helpers.c",
    "include-all.c",
    "main.c",
    "metadata.c",
    "module.c",
    "object.c",
    "targets.c",
  ]
}
