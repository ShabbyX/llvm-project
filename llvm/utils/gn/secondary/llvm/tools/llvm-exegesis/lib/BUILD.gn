import("//build_overrides/llvm.gni")

import("//${llvm_root}llvm/lib/Target/targets.gni")
import("//${llvm_root}llvm/lib/Target/targets_with_exegesis.gni")

static_library("lib") {
  output_name = "LLVMExegesis"
  deps = [
    "//${llvm_root}llvm/lib/Analysis",
    "//${llvm_root}llvm/lib/CodeGen",
    "//${llvm_root}llvm/lib/CodeGen/GlobalISel",
    "//${llvm_root}llvm/lib/ExecutionEngine",
    "//${llvm_root}llvm/lib/ExecutionEngine/MCJIT",
    "//${llvm_root}llvm/lib/IR",
    "//${llvm_root}llvm/lib/MC",
    "//${llvm_root}llvm/lib/MCA",
    "//${llvm_root}llvm/lib/Object",
    "//${llvm_root}llvm/lib/ObjectYAML",
    "//${llvm_root}llvm/lib/Support",
    "//${llvm_root}llvm/lib/TargetParser",
  ]
  sources = [
    "Analysis.cpp",
    "Assembler.cpp",
    "BenchmarkResult.cpp",
    "BenchmarkRunner.cpp",
    "Clustering.cpp",
    "CodeTemplate.cpp",
    "DisassemblerHelper.cpp",
    "Error.cpp",
    "LatencyBenchmarkRunner.cpp",
    "LlvmState.cpp",
    "MCInstrDescView.cpp",
    "ParallelSnippetGenerator.cpp",
    "PerfHelper.cpp",
    "RegisterAliasing.cpp",
    "RegisterValue.cpp",
    "SchedClassResolution.cpp",
    "SerialSnippetGenerator.cpp",
    "SnippetFile.cpp",
    "SnippetGenerator.cpp",
    "SnippetRepetitor.cpp",
    "SubprocessMemory.cpp",
    "Target.cpp",
    "UopsBenchmarkRunner.cpp",
  ]

  deps += targets_with_exegesis
}
