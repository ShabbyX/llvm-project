import("//build_overrides/llvm.gni")

import("//${llvm_build_root}/secondary/llvm/lib/Target/targets.gni")

executable("llvm-mca") {
  deps = [
    "//${llvm_build_root}/secondary/llvm/lib/MC",
    "//${llvm_build_root}/secondary/llvm/lib/MC/MCParser",
    "//${llvm_build_root}/secondary/llvm/lib/MCA",
    "//${llvm_build_root}/secondary/llvm/lib/Support",
    "//${llvm_build_root}/secondary/llvm/lib/Target:AllTargetsAsmParsers",
    "//${llvm_build_root}/secondary/llvm/lib/Target:AllTargetsDescs",
    "//${llvm_build_root}/secondary/llvm/lib/Target:AllTargetsDisassemblers",
    "//${llvm_build_root}/secondary/llvm/lib/Target:AllTargetsInfos",
    "//${llvm_build_root}/secondary/llvm/lib/Target:AllTargetsMCAs",
    "//${llvm_build_root}/secondary/llvm/lib/TargetParser",
  ]
  include_dirs = [
    ".",
    "include",
  ]
  sources = [
    "CodeRegion.cpp",
    "CodeRegionGenerator.cpp",
    "PipelinePrinter.cpp",
    "Views/BottleneckAnalysis.cpp",
    "Views/DispatchStatistics.cpp",
    "Views/InstructionInfoView.cpp",
    "Views/InstructionView.cpp",
    "Views/RegisterFileStatistics.cpp",
    "Views/ResourcePressureView.cpp",
    "Views/RetireControlUnitStatistics.cpp",
    "Views/SchedulerStatistics.cpp",
    "Views/SummaryView.cpp",
    "Views/TimelineView.cpp",
    "llvm-mca.cpp",
  ]
  defines = []
}
